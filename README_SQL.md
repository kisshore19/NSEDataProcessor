mysql --local-infile=1 -u root -p

LOAD DATA INFILE 'D:\\Stock Research\\Data\\NseData\\Options-Data\\fo27APR2021bhav.csv' INTO TABLE options_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES;

mysql --local-infile=1 -u root -p
LOAD DATA LOCAL INFILE 'D:\\Stock Research\\Data\\NseData\\Options-Data\\\fo23FEB2022bhav.csv' INTO TABLE options_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES;

LOAD DATA LOCAL INFILE 'D:\\Stock Research\\Data\\NseData\\Options-Data\\extracted\\final.csv' INTO TABLE options_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES;

LOAD DATA LOCAL INFILE 'D:\\Stock Research\\Data\\NseData\\Options-Data\\extracted\\final.csv' INTO TABLE options_data.options_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES;
LOAD DATA LOCAL INFILE 'D:\\Stock Research\\Data\\NseData\\Bhav-Data\\final.csv' INTO TABLE options_data.bhav_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES;

UPDATE bhav_data SET DATE1 = TRIM(DATE1);
UPDATE bhav_data SET SERIES = TRIM(SERIES);

select * from bhav_data where symbol='INFY' AND SERIES='EQ' AND DATE1='23-Feb-2021' and open_price >= 1260 and low_price <=1260;
select * from bhav_data where symbol='INFY' AND SERIES='EQ' AND DATE1='23-Feb-2021' and ((open_price >= 1260 and low_price <=1260) or (open_price<=1260 and low_price=1260));

LOAD DATA INFILE 'D:\\Stock Research\\Data\\OPTIONS-DATA\\Feb-2021\\feb-2021.csv'
INTO TABLE options_data
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES;

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA LIMIT 1;

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA where OPTION_TYP in ('ce', 'pe')ORDER BY SYMBOL, OPEN_INT DESC,  SYMBOL LIMIT 10;



SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA where OPTION_TYP in ('ce', 'pe')ORDER BY SYMBOL, OPEN_INT DESC,  SYMBOL LIMIT 10;


SELECT max(OPEN_INT) from OPTIONS_DATA where SYMBOL='' and EXPIRY_DT=''

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE STRIKE_PR = (
SELECT STRIKE_PR from OPTIONS_DATA where  OPTION_TYP in ('ce', 'pe') AND SYMBOL='AXISBANK' and TRADING_DATE='04-Jan-2022' ORDER BY OPEN_INT DESC LIMIT 1) AND SYMBOL='AXISBANK' and TRADING_DATE='04-Jan-2022';

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE STRIKE_PR = (
-> SELECT STRIKE_PR from OPTIONS_DATA where  OPTION_TYP in ('ce', 'pe') AND SYMBOL='AXISBANK' and TRADING_DATE='01-FEB-2021' ORDER BY OPEN_INT DESC LIMIT 1) AND SYMBOL='AXISBANK' and TRADING_DATE='01-FEB-2021';

	SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE SYMBOL='AXISBANK' AND TRADING_DATE='11-FEB-2021' ORDER BY OPEN_INT DESC LIMIT 2;

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE  (TRADING_DATE, STRIKE_PR) in ( SELECT TRADING_DATE, max(OPEN_INT) FROM OPTIONS_DATA WHERE OPTION_TYP in ('ce', 'pe') AND SYMBOL='AXISBANK' group by (TRADING_DATE));


SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE  open_int  in (select max(open_int) FROM OPTIONS_DATA WHERE  OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='27-Jan-2022' and SYMBOL='AXISBANK' group by trading_date);

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE  open_int  in (select max(open_int) FROM OPTIONS_DATA WHERE  OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='24-FEB-2022' and SYMBOL='TCS' group by trading_date) AND SYMBOL='TCS' ORDER BY TRADING_DATE;


SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE    OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='10-FEB-2022' and SYMBOL='TCS' ORDER BY OPEN_INT LIMIT 1;

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE   OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='18-FEB-2022' and SYMBOL='BANKNIFTY' ORDER BY OPEN_INT DESC LIMIT 5;

insert into options_data_temp SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE   OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='18-FEB-2022' and SYMBOL='AXISBANK' ORDER BY OPEN_INT DESC LIMIT 1;


SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE    OPTION_TYP in ('ce', 'pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='18-FEB-2022' and SYMBOL='HDFCBANK' ORDER BY OPEN_INT DESC LIMIT 10;


SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE    OPTION_TYP in ('pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='18-FEB-2022' and SYMBOL='HDFCBANK' AND STRIKE_PR <= 1600 ORDER BY OPEN_INT DESC LIMIT 1;

SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE    OPTION_TYP in ('pe') and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='18-FEB-2022' and SYMBOL='HDFCBANK' AND STRIKE_PR <= 1600 ORDER BY OPEN_INT DESC LIMIT 1;


SELECT SYMBOL, EXPIRY_DT, STRIKE_PR, OPTION_TYP,  OPEN, HIGH, LOW, CLOSE, OPEN_INT, CHG_IN_OI, TRADING_DATE FROM OPTIONS_DATA WHERE    OPTION_TYP ='ce' and EXPIRY_DT='24-FEB-2022' AND TRADING_DATE ='10-FEB-2022' and SYMBOL='HDFCBANK'  AND STRIKE_PR BETWEEN 1480 AND 1600  AND OPEN_INT > 1025200 ORDER BY OPEN_INT ASC LIMIT 1;